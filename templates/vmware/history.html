{% extends "layout.html" %}
{% block body %}
<link href="//cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
<div class="page-header">
<h3><i class="fa fa-pie-chart fa-fw"></i> Statistics - VMware History</h3>
</div>
<div class="container" role="main">
	<div class="col-md-12">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="panel-title">History</h3>
			</div>
			<div class="panel-body">
				<div id="chart_history"></div>
			</div>
		</div>
	</div>
</div>
<script>
	var chart_history = c3.generate({
		bindto: '#chart_history',
		data: {
			x: 'x',
			xFormat: '%Y-%m-%dT%H:%M:%S',
			columns: [
				['x', {%- for row in stats_vms -%}'{{ row.timestamp.strftime("%Y-%m-%dT%H:%M:%S") }}'{%- if not loop.last -%},{%- endif -%}{%- endfor -%}],
				['Total VMs', {%- for row in stats_vms-%}{{ row.value }}{%- if not loop.last -%},{%- endif -%}{%- endfor -%}],
				['Linux VMs', {%- for row in stats_linux_vms -%}{{ row.value }}{%- if not loop.last -%},{%- endif -%}{%- endfor -%}],
				['Windows VMs', {%- for row in stats_windows_vms -%}{{ row.value }}{%- if not loop.last -%},{%- endif -%}{%- endfor -%}],
			],
		},
		axis: {
			x: {
				type: 'timeseries',
				tick: {
					format: '%Y-%m-%d'
				}
			},
		},
		zoom: {
			enabled: true
		}
	});
</script>
{% endblock %}
